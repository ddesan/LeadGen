'use strict';

exports.__esModule = true;
exports.default = usePortal;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactDom2 = _interopRequireDefault(_reactDom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function usePortal() {
  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var _useState = (0, _react.useState)(null),
      container = _useState[0],
      setContainer = _useState[1];

  var id = props.id;

  (0, _react.useEffect)(function () {
    if (!process.browser) return null;
    var divId = window.document.getElementById(id || '__next'); //id = '__next' for next js
    if (!divId) divId = document.body;
    if (!divId) return null;
    var container = window.document.createElement('div');
    divId.appendChild(container);
    setContainer(container);
    return function () {
      divId.removeChild(container);
    };
  }, []);

  return function Portal(props) {
    return container ? _reactDom2.default.createPortal(props.children, container) : _react2.default.createElement(
      _react.Fragment,
      null,
      props.children
    );
  };
}
module.exports = exports['default'];